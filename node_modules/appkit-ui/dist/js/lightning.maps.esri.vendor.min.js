/*! appkit-ui 2018-09-10 */
!function(a){"use strict";a.module("esri.core",[])}(angular),function(a){"use strict";a.module("esri.core").factory("esriLoader",["$q",function(a){function b(b){var d=a.defer(),e=b||{};if(c())return d.reject("ArcGIS API for JavaScript is already loaded."),d.promise;var f=document.createElement("script");return f.type="text/javascript",f.src=e.url||window.location.protocol+"//js.arcgis.com/3.19compact",f.onload=function(){d.resolve(window.require)},document.body.appendChild(f),d.promise}function c(){return"undefined"!=typeof window.require}function d(b,d){var e=a.defer();return c()?"string"==typeof b?(require([b],function(a){e.resolve(a)}),e.promise.then(function(a){return d&&"function"==typeof d&&d(a),a})):b instanceof Array?(require(b,function(){var a=Array.prototype.slice.call(arguments);e.resolve(a)}),e.promise.then(function(a){return d&&"function"==typeof d&&d.apply(this,a),a})):(e.reject("An Array<String> or String is required to load modules."),e.promise):(e.reject("Trying to call esriLoader.require(), but the ArcGIS API for JavaScript has not been loaded yet. Run esriLoader.bootstrap() if you are lazy loading the ArcGIS API for JavaScript."),e.promise)}return{bootstrap:b,isLoaded:c,require:d}}])}(angular),function(a){"use strict";a.module("esri.core").service("esriRegistry",["$q",function(a){var b={};return{_register:function(c,d){b[c]||(b[c]=a.defer());var e=b[c];return d.then(function(a){return e.resolve(a),a},function(a){return e.reject(a),a}),function(){delete b[c]}},get:function(c){if(b[c])return b[c].promise;var d=a.defer();return b[c]=d,d.promise}}}])}(angular),function(a){"use strict";a.module("esri.core").factory("esriMapUtils",["$q","esriLoader",function(a,b){function c(a){return a instanceof Array}function d(a,b){return"esri.geometry.Extent"===a.declaredClass?a:new b(a)}var e={};return e.addCustomBasemap=function(a,d){return b.require("esri/basemaps").then(function(b){var e=d.baseMapLayers;return!c(e)&&c(d.urls)&&(e=d.urls.map(function(a){return{url:a}})),c(e)&&(b[a]={baseMapLayers:e,thumbnailUrl:d.thumbnailUrl,title:d.title}),b})},e.createMap=function(a,c){return b.require(["esri/map","esri/geometry/Extent"]).then(function(b){var e=b[0],f=b[1];return c&&c.hasOwnProperty("extent")&&(c.extent=d(c.extent,f)),new e(a,c)})},e.createWebMap=function(c,e,f,g){var h=a.defer();return b.require(["esri/arcgis/utils","esri/geometry/Extent"],function(a,b){f.hasOwnProperty("extent")&&(f.extent=d(f.extent,b)),a.createMap(c,e,{mapOptions:f}).then(function(b){g.layerInfos=a.getLegendLayers(b),g.itemInfo=b.itemInfo,h.resolve(b.map)})}),h.promise},e}])}(angular),function(a){"use strict";a.module("esri.core").factory("esriLayerUtils",["esriLoader",function(a){function b(a){var b;return"string"==typeof a&&(b=[],a.split(",").forEach(function(a){var c=parseInt(a);isNaN(c)||b.push(c)})),b}function c(a,b){return"esri.InfoTemplate"===a.declaredClass?a:a instanceof Array&&2===a.length?new b(a[0],a[1]):new b(a.title,a.content)}var d={};return d.createFeatureLayer=function(b,d){return a.require(["esri/layers/FeatureLayer","esri/InfoTemplate"]).then(function(a){var e=a[0],f=a[1];return d&&(d.infoTemplate&&(d.infoTemplate=c(d.infoTemplate,f)),d.hasOwnProperty("mode")&&(d.mode=e[d.mode])),new e(b,d)})},d.createVectorTileLayer=function(b,c){return a.require(["esri/layers/VectorTileLayer"]).then(function(a){var d=a[0];return new d(b,c)})},d.createDynamicMapServiceLayer=function(d,e,f){return a.require(["esri/layers/ArcGISDynamicMapServiceLayer","esri/InfoTemplate","esri/layers/ImageParameters"]).then(function(a){var g,h=a[0],i=a[1],j=a[2];if(e){if(e.infoTemplates)for(var k in e.infoTemplates)e.infoTemplates.hasOwnProperty(k)&&(e.infoTemplates[k].infoTemplate=c(e.infoTemplates[k].infoTemplate,i));if("object"==typeof e.imageParameters&&"esri.layers.ImageParameters"!==e.imageParameters.declaredClass){var l=new j;for(var m in e.imageParameters)e.imageParameters.hasOwnProperty(m)&&(l[m]=e.imageParameters[m]);e.imageParameters=l}}return g=new h(d,e),f&&g.setVisibleLayers(b(f)),g})},d.createInfoTemplate=function(b){return a.require("esri/InfoTemplate").then(function(a){return c(b,a)})},d}])}(angular),function(a){"use strict";a.module("esri.map",["esri.core"])}(angular),function(a){"use strict";a.module("esri.map").controller("EsriMapController",["$attrs","$timeout","esriMapUtils","esriRegistry",function(b,c,d,e){function f(a){return"undefined"==typeof a}function g(a,b){var c=b.geographicExtent&&b.geographicExtent.getCenter();c&&(c=c.normalize(),a.center={lat:c.y,lng:c.x}),a.zoom=b.getZoom()}var h,i=b;this.getMapOptions=function(){var a=this.mapOptions()||{};return this.basemap&&(a.basemap=this.basemap),this.center&&(this.center.lng&&this.center.lat?a.center=[this.center.lng,this.center.lat]:a.center=this.center),this.zoom&&(a.zoom=this.zoom),a},this.getMap=function(){return h},this.addLayer=function(a,b){return this.getMap().then(function(c){return c.addLayer(a,b)})},this.removeLayer=function(a){return this.getMap().then(function(b){return b.removeLayer(a)})},this.addLayerInfo=function(a){this.layerInfos?this.layerInfos.unshift(a):this.layerInfos=[a]},this.getLayerInfos=function(){return this.layerInfos},this.bindMapEvents=function(a,b){var d=this;this.getMap().then(function(e){e.loaded?(g(d,e),b.load&&d.load()(e)):b.load&&e.on("load",function(){a.$apply(function(){d.load()(e)})}),e.on("extent-change",function(f){b.extentChange&&d.extentChange()(f),d.inUpdateCycle||(d.inUpdateCycle=!0,a.$applyAsync(function(){g(d,e),c(function(){d.inUpdateCycle=!1},0)}))}),a.$watch("mapCtrl.basemap",function(a,b){e.loaded&&a!==b&&e.setBasemap(a)}),d.inUpdateCycle=!1,f(b.center)&&f(b.zoom)||a.$watchGroup(["mapCtrl.center.lng","mapCtrl.center.lat","mapCtrl.zoom"],function(a){d.inUpdateCycle||""!==a[0]&&""!==a[1]&&""!==a[2]&&(d.inUpdateCycle=!0,e.centerAndZoom([a[0],a[1]],a[2]).then(function(){d.inUpdateCycle=!1}))}),a.$on("$destroy",function(){d.deregister&&d.deregister(),e.destroy()})})},this.$onInit=function(){h=this.webmapId?d.createWebMap(this.webmapId,i.id,this.getMapOptions(),this):d.createMap(i.id,this.getMapOptions()),i.registerAs&&(this.deregister=e._register(i.registerAs,h))},1===a.version.major&&a.version.minor<5&&this.$onInit()}])}(angular),function(a){"use strict";a.module("esri.map").directive("esriMap",function(){return{restrict:"E",scope:{center:"=?",zoom:"=?",itemInfo:"=?",basemap:"@",webmapId:"@?",load:"&",extentChange:"&",mapOptions:"&"},controllerAs:"mapCtrl",bindToController:!0,controller:"EsriMapController",compile:function(a,b){return a.removeAttr("id"),a.append("<div id="+b.id+"></div>"),function(a,b,c,d){d.bindMapEvents(a,c)}}}})}(angular),function(a){"use strict";a.module("esri.map").directive("esriLegend",["$q","esriLoader",function(a,b){return{priority:-10,restrict:"EA",require:["?esriLegend","^esriMap"],replace:!0,scope:{},controllerAs:"legendCtrl",bindToController:!0,controller:function(){},link:function(c,d,e,f){var g=f[1],h=e.targetId||e.id,i=a.defer();b.require(["esri/dijit/Legend"],function(a){g.getMap().then(function(b){var d=function(b){var d,e={map:b},f=g.getLayerInfos();f&&(e.layerInfos=f),d=new a(e,h),d.startup(),c.$watchCollection(function(){return g.getLayerInfos()},function(a){d.refresh(a)}),i.resolve(d),c.$on("$destroy",function(){d.destroy()})};b.loaded?d(b):b.on("load",function(){d(b)})})})}}}])}(angular),function(a){"use strict";a.module("esri.map").controller("EsriLayerControllerBase",function(){function a(a){return a===!0||"true"===a}this.getLayerOptions=function(){var b=this.layerOptions()||{};return"undefined"!=typeof this.visible&&(b.visible=a(this.visible)),this.opacity&&(b.opacity=Number(this.opacity)),b},this.getLayerInfo=function(a,b){return{title:b.title||a.name,layer:a,hideLayers:b.hideLayers?b.hideLayers.split(",").map(Number):void 0,defaultSymbol:!b.defaultSymbol||JSON.parse(b.defaultSymbol)}},this._bindLayerEvents=function(b,c,d,e){c.load&&(d.loaded?b.layerCtrl.load()(d):d.on("load",function(){b.$apply(function(){b.layerCtrl.load()(d)})})),c.updateEnd&&d.on("update-end",function(a){b.$apply(function(){b.layerCtrl.updateEnd()(a)})}),b.$watch("layerCtrl.visible",function(b,c){b!==c&&d.setVisibility(a(b))}),b.$watch("layerCtrl.opacity",function(a,b){a!==b&&d.setOpacity(Number(a))}),b.$on("$destroy",function(){e.removeLayer(d)})}})}(angular),function(a){"use strict";a.module("esri.map").controller("EsriFeatureLayerController",["$controller","esriLayerUtils",function(b,c){var d;a.extend(this,b("EsriLayerControllerBase")),this.getFeatureLayerOptions=function(){var a=this.getLayerOptions();return this.definitionExpression&&(a.definitionExpression=this.definitionExpression),a},this.getLayer=function(){return d},this.setInfoTemplate=function(a){return this.getLayer().then(function(b){return c.createInfoTemplate(a).then(function(a){return b.setInfoTemplate(a),a})})},this.bindLayerEvents=function(a,b,c,d){this._bindLayerEvents(a,b,c,d),a.$watch("layerCtrl.definitionExpression",function(a,b){a!==b&&c.setDefinitionExpression(a)})},this.$onInit=function(){d=c.createFeatureLayer(this.url,this.getFeatureLayerOptions())},1===a.version.major&&a.version.minor<5&&this.$onInit()}])}(angular),function(a){"use strict";a.module("esri.map").directive("esriFeatureLayer",function(){return{restrict:"E",require:["esriFeatureLayer","^esriMap"],replace:!0,scope:{url:"@",visible:"@?",opacity:"@?",definitionExpression:"@?",load:"&",updateEnd:"&",layerOptions:"&"},controllerAs:"layerCtrl",bindToController:!0,controller:"EsriFeatureLayerController",link:function(a,b,c,d){var e=d[0],f=d[1];e.getLayer().then(function(b){var d=e.getLayerInfo(b,c);f.addLayer(b,0),f.addLayerInfo(d),e.bindLayerEvents(a,c,b,f)})}}})}(angular),function(a){"use strict";a.module("esri.map").controller("EsriDynamicMapServiceLayerController",["$controller","esriLayerUtils",function(b,c){var d;a.extend(this,b("EsriLayerControllerBase")),this.getLayer=function(){return d},this.setInfoTemplate=function(a,b){return this.getLayer().then(function(d){return c.createInfoTemplate(b).then(function(b){var c=d.infoTemplates;return c||(c={}),c[a]={infoTemplate:b},d.setInfoTemplates(c),c})})},this.bindLayerEvents=function(a,b,c,d){this._bindLayerEvents(a,b,c,d)},this.$onInit=function(){d=c.createDynamicMapServiceLayer(this.url,this.getLayerOptions(),this.visibleLayers)},1===a.version.major&&a.version.minor<5&&this.$onInit()}])}(angular),function(a){"use strict";a.module("esri.map").directive("esriDynamicMapServiceLayer",function(){return{restrict:"E",require:["esriDynamicMapServiceLayer","^esriMap"],replace:!0,scope:{url:"@",visible:"@?",opacity:"@?",visibleLayers:"@?",load:"&",updateEnd:"&",layerOptions:"&"},controllerAs:"layerCtrl",bindToController:!0,controller:"EsriDynamicMapServiceLayerController",link:function(a,b,c,d){var e=d[0],f=d[1];e.getLayer().then(function(b){var d=e.getLayerInfo(b,c);f.addLayer(b),f.addLayerInfo(d),e.bindLayerEvents(a,c,b,f)})}}})}(angular),function(a){"use strict";a.module("esri.map").controller("EsriVectorTileLayerController",["$controller","esriLayerUtils",function(b,c){var d;a.extend(this,b("EsriLayerControllerBase")),this.getLayer=function(){return d},this.bindLayerEvents=function(a,b,c,d){this._bindLayerEvents(a,b,c,d)},this.$onInit=function(){d=c.createVectorTileLayer(this.url,this.getLayerOptions())},1===a.version.major&&a.version.minor<5&&this.$onInit()}])}(angular),function(a){"use strict";a.module("esri.map").directive("esriVectorTileLayer",function(){return{restrict:"E",require:["esriVectorTileLayer","^esriMap"],replace:!0,scope:{url:"@",visible:"@?",opacity:"@?",load:"&",layerOptions:"&"},controllerAs:"layerCtrl",bindToController:!0,controller:"EsriVectorTileLayerController",link:function(a,b,c,d){var e=d[0],f=d[1];e.getLayer().then(function(b){var d=e.getLayerInfo(b,c);f.addLayer(b),f.addLayerInfo(d),e.bindLayerEvents(a,c,b,f)})}}})}(angular),function(a){"use strict";a.module("esri.map").directive("esriInfoTemplate",function(){return{restrict:"E",require:["?esriInfoTemplate","?^esriDynamicMapServiceLayer","?^esriFeatureLayer"],replace:!0,compile:function(a){var b=a.html();return a.html(""),function(a,c,d,e){var f=e[1],g=e[2];f&&f.setInfoTemplate(d.layerId,{title:d.title,content:b}),g&&g.setInfoTemplate({title:d.title,content:b})}}}})}(angular);